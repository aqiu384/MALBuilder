
 
<h2 style="color: #31476B;"> Current MAL </h3>
<div class="panel panel-default">
<div class="table-responsive">
    <table class="table table-striped table-hover table-condensed">
        <thead>
            <tr>
                {% for field in fields %}
                    {% if field in field_map.keys() %}
                      <th> {{field_map[field]}} </th>
                    {% else %}
                      <th> {{field}} </th>
                    {% endif %}
                {% endfor %}
            </tr>
        </thead>
        <tbody>
            {% for anime in animelist %}
                <tr>
                    {% set count = 0 %}
                    {% for anime_field in anime  %}
                        {% if fields[count] == "imgLink" %}
                            <td> <img src={{anime_field}} height="150" class="img-rounded"> </td>
                        {% elif fields[count] == "description" %}
                            <td style="overflow: hidden;"> <div class="description-column-{{count}}" style="height:100px; width:100px; overflow:hidden">{{anime_field}}</div></td>
                        {% else %}
                            <td> {{anime_field}} </td>
                        {% endif %}
                        {% set count = count + 1 %}
                    {% endfor %}
                </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
</div>

<div class="panel panel-primary">
  <div class="panel-heading">
    <h3 class="panel-title">
      Filter MAL</h3>
      <span class="pull-right clickable"><i class="glyphicon glyphicon-minus"></i></span>
    </div>
    <div class="panel-body">

      {% include "formerrors.html" %}

<div class="jumbotron" id="searchformpage">
  <h1>Filter My MAL</h1>

  <p>Enter filter criteria below.</p>

  <form name="animefilter" method="POST" id="animefilterform">
  {{ form.hidden_tag() }}

    <div class="form-group">
      <label class="col-sm-2 control-label">Starting Air Date</label>
      <div class="form-inline">
        {{ form.startDateStart(class_="form-control", placeholder="mm/dd/yyyy") }} to
        {{ form.startDateEnd(class_="form-control", placeholder="mm/dd/yyyy") }}
      </div>
    </div>

    <div class="form-group">
      <label class="col-sm-2 control-label">Ending Air Date</label>
      <div class="form-inline">
        {{ form.endDateStart(class_="form-control", placeholder="mm/dd/yyyy") }} to
        {{ form.endDateEnd(class_="form-control", placeholder="mm/dd/yyyy") }}
      </div>
    </div>

    <div class="form-group">
      <label class="col-sm-2 control-label">MAL Score</label>
      <div class="form-inline">
        {{ form.scoreStart(class_="form-control", placeholder="Greater than") }} to
        {{ form.scoreEnd(class_="form-control", placeholder="Less than") }}
      </div>
    </div>

    <div class="form-group">
      <label class="col-sm-2 control-label">Members</label>
      <div class="form-inline">
        {{ form.membersStart(class_="form-control", placeholder="Greater than") }} to
        {{ form.membersEnd(class_="form-control", placeholder="Less than") }}
      </div>
    </div>

    <div class="form-group">
      <label class="col-sm-2 control-label">Episode Count</label>
      <div class="form-inline">
        {{ form.episodeGreaterThan(class_="form-control", placeholder="Greater than") }} to
        {{ form.episodeLessThan(class_="form-control", placeholder="Less than") }}
      </div>
    </div>

    <div class="form-group">
      <label class="col-sm-2 control-label">My Status</label>
      <label class="form-inline">
        {{ form.myStatus(class_="checkbox-grid2", multiple=True) }}
      </label>
    </div>

    <div class="form-group">
      <label class="col-sm-2 control-label">Episodes Watched</label>
      <div class="form-inline">
        {{ form.episodeWatchedStart(class_="form-control", placeholder="Greater than") }} to
        {{ form.episodeWatchedEnd(class_="form-control", placeholder="Less than") }}
      </div>
    </div>

    <div class="form-group">
      <label class="col-sm-2 control-label">Watch Dates</label>
      <div class="form-inline">
        {{ form.myWatchDateStart(class_="form-control", placeholder="Started") }} to
        {{ form.myWatchDateEnd(class_="form-control", placeholder="Finished") }}
      </div>
    </div>

    <div class="form-group">
      <label class="col-sm-2 control-label">My Score</label>
      <div class="form-inline">
        {{ form.myScoreStart(class_="form-control", placeholder="After") }} to
        {{ form.myScoreEnd(class_="form-control", placeholder="Before") }}
      </div>
    </div>

    <div class="form-group">
      <label class="col-sm-2 control-label">Episodes Rewatched</label>
      <div class="form-inline">
        {{ form.rewatchEpisodesStart(class_="form-control", placeholder="Greater than") }} to
        {{ form.rewatchEpisodesEnd(class_="form-control", placeholder="Less than") }}
      </div>
    </div>

    <div class="form-group">
      <label class="col-sm-2 control-label">Last Updated</label>
      <div class="form-inline">
        {{ form.updateDateStart(class_="form-control", placeholder="After") }} to
        {{ form.updateDateEnd(class_="form-control", placeholder="Before") }}
      </div>
    </div>

    <div class="form-group">
      <label class="col-sm-2 control-label">Medium Type</label>
      <label class="form-inline">
        {{ form.type(class_="checkbox-grid2", multiple=True) }}
      </label>
    </div>

    <div class="form-group">
      <label class="col-sm-2 control-label">Include Genres</label>
      <label class="form-inline">
        {{ form.genresInclude(class_="checkbox-grid4", multiple=True) }}
      </label>
    </div>

    <div class="form-group">
      <label class="col-sm-2 control-label">Exclude Genres</label>
      <label class="form-inline">
        {{ form.genresExclude(class_="checkbox-grid4", multiple=True) }}
      </label>
    </div>

    <div class="form-group">
      <label class="col-sm-2 control-label">Display Fields</label>
      <label class="form-inline">
        {{ form.fields(class_="checkbox-grid4", multiple=True) }}
      </label>
    </div>

      <div class="col-sm-offset-5" id="searchfilterbutton">
        {{ form.submit(class_="btn btn-lg btn-info") }}
      </div>
  </form>
  </div>
    </div>
  </div>



<style>
.clickable
{
    cursor: pointer;
}

.clickable .glyphicon
{
    background: rgba(0, 0, 0, 0.15);
    display: inline-block;
    padding: 6px 12px;
    border-radius: 4px
}

.panel-heading span
{
    margin-top: -23px;
    font-size: 15px;
    margin-right: -9px;
}
a.clickable { color: inherit; }
a.clickable:hover { text-decoration:none; }
</style>
<script>



$(document).on('click', '.panel-heading span.clickable', function (e) {
    var $this = $(this);
    if (!$this.hasClass('panel-collapsed')) {
        $this.parents('.panel').find('.panel-body').slideUp();
        $this.addClass('panel-collapsed');
        $this.find('i').removeClass('glyphicon-minus').addClass('glyphicon-plus');
    } else {
        $this.parents('.panel').find('.panel-body').slideDown();
        $this.removeClass('panel-collapsed');
        $this.find('i').removeClass('glyphicon-plus').addClass('glyphicon-minus');
    }
});
$(document).on('click', '.panel div.clickable', function (e) {
    var $this = $(this);
    if (!$this.hasClass('panel-collapsed')) {
        $this.parents('.panel').find('.panel-body').slideUp();
        $this.addClass('panel-collapsed');
        $this.find('i').removeClass('glyphicon-minus').addClass('glyphicon-plus');
    } else {
        $this.parents('.panel').find('.panel-body').slideDown();
        $this.removeClass('panel-collapsed');
        $this.find('i').removeClass('glyphicon-plus').addClass('glyphicon-minus');
    }
});
$(document).ready(function () {
    $('.panel-heading span.clickable').click();
    $('.panel div.clickable').click();
});
</script>

